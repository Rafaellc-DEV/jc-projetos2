{% extends "base.html" %}
{% load static %}

{% block title %}Página Inicial - JC Online{% endblock %}

{% block extra_head %}
<style>
  :root {
    --headline: #000;
    --text: #555;
    --muted: #999;
    --brand: #003087;
    --chip-bg: #E4F2EE;
    --chip-tx: #00796B;
    --accent: #d14b42; /* Cor da bolinha (vermelho) */
  }

  main.container {
    max-width: 980px;
    margin: 0 auto;
  }

  .categoria-bloco {
      margin-bottom: 3rem; /* Espaçamento entre os blocos de categoria */
  }

  .lead {
    background: #fff;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 1px 4px rgba(0,0,0,.06);
  }

  .lead__body {
    padding: 22px 26px;
  }

  .chip {
    display: inline-flex;
    align-items: center;
    padding: 6px 12px;
    border-radius: 999px;
    background: var(--chip-bg);
    color: var(--chip-tx);
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    text-decoration: none;
  }

  .lead__title {
    font: 700 2.1rem/1.2 Georgia, "Times New Roman", serif;
    color: var(--headline);
    margin: 12px 0 8px;
  }

  .lead__deck {
    color: var(--text);
    font-size: 1rem;
    line-height: 1.6;
  }

  /* Estilo das notícias relacionadas */
  .related {
    margin-top: 24px;
    border-top: 1px solid #eee;
    padding-top: 20px;
  }

  .related__label {
    font-size: .8rem;
    color: var(--brand);
    text-transform: uppercase;
    letter-spacing: .06em;
    margin-bottom: 12px;
    font-weight: 320;
  }

  .related__list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    gap: 10px;
  }

  .related__item {
    display: flex;
    gap: 10px;
    align-items: flex-start;
  }

  .related__dot {
    color: var(--accent); /* Usa a cor da bolinha */
    font-weight: 800;
    line-height: 1.6; /* Alinha a bolinha com o texto */
  }

  .related__link {
    color: #111;
    text-decoration: none;
    font: 600 1rem/1.6 Georgia, "Times New Roman", serif;
  }

  .related__link:hover {
    text-decoration: underline;
  }
</style>
{% endblock %}

{% block content %}
<main class="container py-4">

  {% for item in dados_home %}
    <section class="categoria-bloco">
        <div class="lead">
            <div class="lead__body">
            
            <span class="chip">
                {{ item.categoria.nome }}
            </span>
            
            <a href="{% url 'noticia_detalhe' item.destaque.categoria.slug item.destaque.slug %}" class="text-decoration-none">
                <h1 class="lead__title">{{ item.destaque.titulo }}</h1>
            </a>

            <p class="lead__deck">{{ item.destaque.conteudo|truncatewords:40 }}</p>

            {% if item.relacionadas %}
            <div class="related">
                <div class="related__label">Mais sobre {{ item.categoria.nome }}</div>
                <ul class="related__list">
                {% for n in item.relacionadas %}
                <li class="related__item">
                    <span class="related__dot">•</span>
                    <a href="{% url 'noticia_detalhe' n.categoria.slug n.slug %}" class="related__link">{{ n.titulo }}</a>
                </li>
                {% endfor %}
                </ul>
            </div>
            {% endif %}
            </div>
        </div>
    </section>
  {% empty %}
    <div class="text-center py-5">
        <h3 class="text-muted">Ainda não há notícias publicadas.</h3>
    </div>
  {% endfor %} {# <-- CORRIGIDO AQUI #}

</main>
{% endblock %}